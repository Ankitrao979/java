<div class="container mt-5">
    <div class="row">
        <div class="col-md-8 order-md-1">

            <form #registrationForm="ngForm">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="firstName">First name</label>
                        <input type="text" class="form-control" placeholder="First name" required minlength="3" maxlength="20" pattern="[A-Za-z]+" ngModel name="firstName" #firstName="ngModel">
                        <div *ngIf="firstName.invalid && firstName.touched">
                            <p *ngIf="firstName.errors.required" class="text-danger">First name is required</p>
                            <p *ngIf="firstName.errors.minlength" class="text-danger">Minimum 3 charracters required</p>
                            <p *ngIf="firstName.errors.pattern" class="text-danger">Invalid pattern for first name</p>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="lastName">Last name</label>
                        <input required maxlength="11" pattern="[A-Za-z]+" ngModel name="lastName" #lastName="ngModel" type="text" class="form-control">
                        <div *ngIf="lastName.invalid && lastName.touched">
                            <p *ngIf="lastName.errors.required" class="text-danger">Last name is required</p>
                            <p *ngIf="lastName.errors.pattern" class="text-danger">Invalid pattern for first name</p>
                        </div>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="username">Username</label>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">@</span>
                        </div>
                        <input type="text" class="form-control" id="username" placeholder="Username" pattern="[A-Za-z]+" required ngModel name="userName" #userName="ngModel">
                    </div>
                    <div *ngIf="userName.invalid && userName.touched">
                        <p *ngIf="userName.errors.required" class="text-danger">User name is required</p>
                        <p *ngIf="userName.errors.minlength" class="text-danger">Minimum 3 charracters required</p>
                        <p *ngIf="userName.errors.pattern" class="text-danger">Invalid pattern for User name</p>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="email">Email <span class="text-muted">(Optional)</span></label>
                    <input type="email" class="form-control" id="email" placeholder="you@example.com" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" ngModel name="email" #email="ngModel">
                    <div *ngIf="email.invalid">
                        <p *ngIf="email.errors.pattern" class="text-danger"> Please enter valid email address</p>
                    </div>
                </div>

                <div ngModelGroup="billingAddress">

                    <hr>
                    <h4 class="mb-3 mt-5">Billing address</h4>

                    <div class="mb-3">
                        <label for="address">Address Lane 1</label>
                        <input type="text" class="form-control" id="address" placeholder="1234 Main St" required ngModel name="addressLane1" #address="ngModel">
                        <div *ngIf="address.invalid && address.touched">
                            <p *ngIf="address.errors.required" class="text-danger">Please complete</p>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="address2">Address 2 <span class="text-muted">(Optional)</span></label>
                        <input type="text" class="form-control" id="address2" ngModel name="addressLane2" placeholder="Apartment or suite">
                    </div>

                    <div class="row">
                        <div class="col-md-5 mb-3">
                            <label for="country">Country</label>
                            <select class="custom-select d-block w-100" ngModel name="country" id="country" required="">
                                 <option value="">Choose...</option>
                                 <option>United States</option>
                         </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="state">State</label>
                            <select class="custom-select d-block w-100" ngModel name="state" id="state" required="">
                             <option value="">Choose...</option>
                             <option>California</option>
                        </select>
                            <div class="invalid-feedback">
                                Please provide a valid state.
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="zip">Zip</label>
                            <input type="text" class="form-control" id="zip" placeholder="" minlength="5" maxlength="5" pattern="[0-9]*" ngModel name="zip" #zip="ngModel">
                            <div *ngIf="zip.invalid && zip.touched">
                                <p *ngIf="zip.errors.required" class="text-danger">required</p>
                                <p *ngIf="zip.errors.minlength" class="text-danger">Minimum charracters required</p>
                                <p *ngIf="zip.errors.pattern" class="text-danger">Invalid pattern for zip</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mailing Address -->
                <div *ngIf="isBillingAddress" ngModelGroup="mailingAddress">
                    <hr>
                    <h4 class="mb-3 mt-5">Mailing address</h4>

                    <div class="mb-3">
                        <label for="address">Address</label>
                        <input type="text" class="form-control" id="address" placeholder="1234 Main St" required ngModel name="addressLane1" #address="ngModel">
                        <div *ngIf="address.invalid && address.touched">
                            <p *ngIf="address.errors.required" class="text-danger">Please complete</p>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="address2">Address 2 <span class="text-muted">(Optional)</span></label>
                        <input type="text" class="form-control" ngModel name="addressLane2" id="address2" placeholder="Apartment or suite">
                    </div>

                    <div class="row">
                        <div class="col-md-5 mb-3">
                            <label for="country">Country</label>
                            <select class="custom-select d-block w-100" ngModel name="country" id="country" required="">
                             <option value="">Choose...</option>
                             <option>United States</option>
                     </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="state">State</label>
                            <select class="custom-select d-block w-100" ngModel name="state" id="state" required="">
                         <option value="">Choose...</option>
                         <option>California</option>
                    </select>
                            <div class="invalid-feedback">
                                Please provide a valid state.
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="zip">Zip</label>
                            <input type="text" class="form-control" id="zip" placeholder="" minlength="5" maxlength="5" pattern="[0-9]*" ngModel name="zip" #zip="ngModel">
                            <div *ngIf="zip.invalid && zip.touched">
                                <p *ngIf="zip.errors.required" class="text-danger">required</p>
                                <p *ngIf="zip.errors.minlength" class="text-danger">Minimum charracters required</p>
                                <p *ngIf="zip.errors.pattern" class="text-danger">Invalid pattern for zip</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- billing checkbox && radio buttons-->

                <hr class="mb-4">
                <div class="custom-control custom-checkbox" (change)="toggledBilling()">
                    <input type="checkbox" class="custom-control-input" id="same-address">
                    <label class="custom-control-label" for="same-address">Shipping address is the same as my billing address</label>
                </div>
                <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="save-info">
                    <label class="custom-control-label" for="save-info">Save this information for next time</label>
                </div>
                <hr class="mb-4">

                <h4 class="mb-3">Payment</h4>
                <div class="d-block my-3">
                    <div class="custom-control custom-radio" (change)="toggledPayments('cc')">
                        <input id="credit" name="paymentMethod" type="radio" class="custom-control-input" checked="" required="">
                        <label class="custom-control-label" for="credit">Credit card / Debit Card</label>
                    </div>
                    <div class="custom-control custom-radio" (change)="toggledPayments('bank')">
                        <input id="debit" name="paymentMethod" type="radio" class="custom-control-input" required="">
                        <label class="custom-control-label" for="debit">Bank Account</label>
                    </div>
                    <div class="custom-control custom-radio" (change)="toggledPayments('paypal')">
                        <input id="paypal" name="paymentMethod" type="radio" class="custom-control-input" required="">
                        <label class="custom-control-label" for="paypal">Paypal</label>
                    </div>
                </div>

                <!-- Bank account -->

                <div class="row" *ngIf="selectPayment=='bank'">

                    <div class="col-md-6 mb-3">
                        <label for="cc-name">Name</label>
                        <input type="text" class="form-control" id="cc-name" placeholder="" minlength="3" pattern="[A-Za-z]+" required ngModel name="nameOnCard" #nameOnCard="ngModel">
                        <small class="text-muted">Full name</small>
                        <div *ngIf="nameOnCard.invalid && nameOnCard.touched">
                            <p *ngIf="nameOnCard.errors.required" class="text-danger">Name is required</p>
                            <p *ngIf="nameOnCard.errors.minlength" class="text-danger">Minimum 3 charracters required</p>
                            <p *ngIf="nameOnCard.errors.pattern" class="text-danger">Invalid pattern for Name</p>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="cc-number">Account Number</label>
                        <input type="text" class="form-control" id="cc-number" placeholder="" required="" required minlength="16" maxlength="16" pattern="[0-9]{13,16}" ngModel name="cardNumber" #cardNumber="ngModel">
                        <div *ngIf="cardNumber.invalid && cardNumber.touched">
                            <p *ngIf="cardNumber.errors.required" class="text-danger">Card number required</p>
                            <p *ngIf="cardNumber.errors.minlength" class="text-danger">Minimum 16 charracters required</p>
                            <p *ngIf="cardNumber.errors.pattern" class="text-danger">Invalid pattern for Card number</p>
                        </div>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label for="cc-expiration">Routing Number</label>
                        <input type="text" class="form-control" id="cc-expiration" placeholder="" required ngModel name="expiration" #expiration="ngModel">
                        <div *ngIf="expiration.invalid && expiration.touched">
                            <p *ngIf="expiration.errors.required" class="text-danger">Expiration required</p>
                            <p *ngIf="expiration.errors.pattern" class="text-danger">Invalid pattern for Expiration</p>
                        </div>
                    </div>
                </div>



                <!-- Credit card /debit card -->

                <div class="row" *ngIf="selectPayment=='cc'">

                    <div class="col-md-6 mb-3">
                        <label for="cc-name">Name on card</label>
                        <input type="text" class="form-control" id="cc-name" placeholder="" minlength="3" pattern="[A-Za-z]+" required ngModel name="nameOnCard" #nameOnCard="ngModel">
                        <small class="text-muted">Full name as displayed on card</small>
                        <div *ngIf="nameOnCard.invalid && nameOnCard.touched">
                            <p *ngIf="nameOnCard.errors.required" class="text-danger">Name is required</p>
                            <p *ngIf="nameOnCard.errors.minlength" class="text-danger">Minimum 3 charracters required</p>
                            <p *ngIf="nameOnCard.errors.pattern" class="text-danger">Invalid pattern for Name</p>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="cc-number">Card number</label>
                        <input type="text" class="form-control" id="cc-number" placeholder="" required="" required minlength="16" maxlength="16" pattern="[0-9]{13,16}" ngModel name="cardNumber" #cardNumber="ngModel">
                        <div *ngIf="cardNumber.invalid && cardNumber.touched">
                            <p *ngIf="cardNumber.errors.required" class="text-danger">Card number required</p>
                            <p *ngIf="cardNumber.errors.minlength" class="text-danger">Minimum 16 charracters required</p>
                            <p *ngIf="cardNumber.errors.pattern" class="text-danger">Invalid pattern for Card number</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="cc-expiration">Expiration</label>
                        <input type="text" class="form-control" id="cc-expiration" placeholder="" required ngModel name="expiration" #expiration="ngModel">
                        <div *ngIf="expiration.invalid && expiration.touched">
                            <p *ngIf="expiration.errors.required" class="text-danger">Expiration required</p>
                            <p *ngIf="expiration.errors.pattern" class="text-danger">Invalid pattern for Expiration</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="cvv">CVV</label>
                        <input class="form-control" type="text" (keyup)="log(registrationForm)" required pattern="[0-9]+" minlength="3" maxlength="3" ngModel name="cvv" #cvv="ngModel">
                        <div *ngIf="cvv.invalid && cvv.touched">
                            <p *ngIf="cvv.errors.required" class="text-danger">cvv required</p>
                            <p *ngIf="cvv.errors.pattern" class="text-danger">Invalid pattern for cvv</p>
                        </div>
                    </div>
                </div>

                <!-- Paypal -->

                <div class="row" *ngIf="selectPayment=='paypal'">

                    <div class="col-md-6 mb-3">
                        <label for="cc-name">User Name</label>
                        <input type="text" class="form-control" id="cc-name" placeholder="" minlength="3" pattern="[A-Za-z]+" required ngModel name="nameOnCard" #nameOnCard="ngModel">
                        <small class="text-muted">User Name</small>
                        <div *ngIf="nameOnCard.invalid && nameOnCard.touched">
                            <p *ngIf="nameOnCard.errors.required" class="text-danger">Name is required</p>
                            <p *ngIf="nameOnCard.errors.minlength" class="text-danger">Minimum 3 charracters required</p>
                            <p *ngIf="nameOnCard.errors.pattern" class="text-danger">Invalid pattern for Name</p>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="cc-number">Mobile number</label>
                        <input type="text" class="form-control" id="cc-number" placeholder="" required="" required minlength="16" maxlength="16" pattern="[0-9]{13,16}" ngModel name="cardNumber" #cardNumber="ngModel">
                        <div *ngIf="cardNumber.invalid && cardNumber.touched">
                            <p *ngIf="cardNumber.errors.required" class="text-danger">Card number required</p>
                            <p *ngIf="cardNumber.errors.minlength" class="text-danger">Minimum 16 charracters required</p>
                            <p *ngIf="cardNumber.errors.pattern" class="text-danger">Invalid pattern for Card number</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="cc-expiration">Password</label>
                        <input type="text" class="form-control" id="cc-expiration" placeholder="" required ngModel name="expiration" #expiration="ngModel">
                        <div *ngIf="expiration.invalid && expiration.touched">
                            <p *ngIf="expiration.errors.required" class="text-danger">Expiration required</p>
                            <p *ngIf="expiration.errors.pattern" class="text-danger">Invalid pattern for Expiration</p>
                        </div>
                    </div>
                </div>

                <hr class="mb-4">
                <button type="submit" (click)="logForm(registrationForm)" [disabled]="registrationForm.invalid" class="btn btn-primary">Submit</button>

                <br>
                <br> {{registrationForm.value | json }}
            </form>
        </div>
    </div>
</div>